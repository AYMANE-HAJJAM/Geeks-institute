{% extends "base.html" %}
{% block content %}
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 p-6">
    {% for vehicle in vehicles %}
    <div class="bg-white border border-gray-200 rounded-lg shadow p-4 flex flex-col">
        <img src="{{ vehicle.image }}" alt="Car Image" class="w-full h-36 object-cover rounded mb-3">
        <h3 class="text-lg font-semibold">{{ vehicle.name }} ({{ vehicle.model }})</h3>
        <p class="text-sm text-gray-500">Year: {{ vehicle.year }}</p>
        <p class="text-sm text-gray-500">Price: ${{ vehicle.price }}</p>
        <p class="text-sm mb-3">
            Status:
            <span class="px-2 py-1 rounded text-xs font-semibold 
                {% if vehicle.status == 'Available' %}
                    bg-green-100 text-green-700
                {% else %}
                    bg-red-100 text-red-700
                {% endif %}">
                {{ vehicle.status }}
            </span>
        </p>

        <div class="mt-auto flex gap-2">
            <a href="/vehicles/{{ vehicle.id }}" 
               class="flex-1 px-3 py-2 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 text-center">
                Details
            </a>

            {% if vehicle.status == 'Available' %}
            <form action="{{ url_for('create_sale') }}" method="POST" class="flex-1"
                  onsubmit="return confirm('Are you sure you want to complete this sale?');">
                <input type="hidden" name="vehicle_id" value="{{ vehicle.id }}">

                <button type="submit" 
                        class="w-full px-3 py-2 text-xs bg-gray-600 text-white rounded hover:bg-gray-700">
                    Sale
                </button>
            </form>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
