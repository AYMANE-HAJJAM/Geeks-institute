<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #3498db;
            color: white;
        }

        h1 {
            margin-bottom: 20px;
        }

        #board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
            justify-content: center;
            margin: 20px auto;
        }

        .cell {
            background: #2980b9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            border-radius: 10px;
        }

        button {
            margin: 10px;
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        #restart {
            display: none;
        }
    </style>
</head>

<body>
    <h1>Tic Tac Toe Game</h1>

    <div>
        <button onclick="chooseSymbol('X')">Play as X</button>
        <button onclick="chooseSymbol('O')">Play as O</button>
    </div>

    <div id="board"></div>

    <h2 id="message"></h2>
    <button id="restart" onclick="restartGame()">Restart Game</button>

    <script>
        let board = Array(9).fill(null);
        let playerSymbol, aiSymbol;
        let gameOver = false;

        const winCombos = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [6, 4, 2]
        ];

        const boardDiv = document.getElementById("board");
        const message = document.getElementById("message");
        const restartBtn = document.getElementById("restart");

        // Create board cells
        for (let i = 0; i < 9; i++) {
            const cell = document.createElement("div");
            cell.classList.add("cell");
            cell.id = i;
            cell.addEventListener("click", () => playerMove(i));
            boardDiv.appendChild(cell);
        }

        function chooseSymbol(symbol) {
            playerSymbol = symbol;
            aiSymbol = (symbol === "X") ? "O" : "X";
            message.textContent = `You are ${playerSymbol}`;
        }

        function playerMove(index) {
            if (!playerSymbol || gameOver) return;
            if (board[index]) return; // already taken

            board[index] = playerSymbol;
            document.getElementById(index).textContent = playerSymbol;

            if (checkWin(playerSymbol)) {
                endGame("You win!");
                return;
            }
            if (isTie()) {
                endGame("Tie game!");
                return;
            }

            aiMove(); // AI plays
        }

        function aiMove() {
            let emptyCells = board
                .map((val, idx) => (val === null ? idx : null))
                .filter(v => v !== null);

            if (emptyCells.length === 0) return;

            let choice = emptyCells[Math.floor(Math.random() * emptyCells.length)];
            board[choice] = aiSymbol;
            document.getElementById(choice).textContent = aiSymbol;

            if (checkWin(aiSymbol)) {
                endGame("Computer wins!");
                return;
            }
            if (isTie()) {
                endGame("Tie game!");
            }
        }

        function checkWin(symbol) {
            return winCombos.some(combo =>
                combo.every(index => board[index] === symbol)
            );
        }

        function isTie() {
            return board.every(cell => cell !== null);
        }

        function endGame(result) {
            message.textContent = result;
            gameOver = true;
            restartBtn.style.display = "inline-block";
        }

        function restartGame() {
            board = Array(9).fill(null);
            gameOver = false;
            message.textContent = "";
            restartBtn.style.display = "none";
            document.querySelectorAll(".cell").forEach(cell => cell.textContent = "");
        }

    </script>
</body>

</html>